# python_backend_Fabrique

## Содержание
1. [Задача](#task)
2. [Запуск проекта локально](#lounch)
3. [Документация API](#api_documentation)

## <a name='task'>Задача</a>
Спроектировать и разработать API для системы опросов пользователей.

Функционал для администратора системы:
- авторизация в системе (регистрация не нужна)
- добавление/изменение/удаление опросов. Атрибуты опроса: название, дата старта, дата окончания, описание. После создания поле "дата старта" у опроса менять нельзя
- добавление/изменение/удаление вопросов в опросе. Атрибуты вопросов: текст вопроса, тип вопроса (ответ текстом, ответ с выбором одного варианта, ответ с выбором нескольких вариантов)

Функционал для пользователей системы:
- получение списка активных опросов
- прохождение опроса: опросы можно проходить анонимно, в качестве идентификатора пользователя в API передаётся числовой ID, по которому сохраняются ответы пользователя на вопросы; один пользователь может участвовать в любом количестве опросов
- получение пройденных пользователем опросов с детализацией по ответам (что выбрано) по уникальному ID пользователя

Использовать следующие технологии:
- Django 2.2.10
- Django REST framework

Результат выполнения задачи:
- исходный код приложения в github (только на github, публичный репозиторий)
- инструкция по разворачиванию приложения (в docker или локально)
- документация по API

## <a name='lounch'>Запуск проекта локально</a>
Необходимо чтобы на локальном компьютере был установлен Python3 и были выполнены следующие условия:
1. Склонируйте репозиторий на локальный компьютер
2. В корневой директории проекта установите и запустите виртуальное окружение
    - `python3 -m venv venv`
    - `source venv/bin/activate`
3. В директории ./python_backend_fabrique создайте файл .env и пропишите в нем SECRET_KEY - секретный ключ Django проекта
4. Установите необходимые библиотеки:
    - `pip3 install -r requirements.txt`
5. Примените все необходимые миграции:
    - `python3 manage.py makemigrations`
    - `python3 manage.py migrate`
6. Для доступа к панели администратора создайте администратора:
    - `python3 manage.py createsuperuser`
7. Запустите локальный сервер:
    - `python3 manage.py runserver`

> Приложение будет доступно в браузере по адресу http://127.0.0.1:8000/.

## <a name='api_documentation'>Документация API</a>
**Функционал** | **Метод** | **Поля запроса** | **URL**
:--- | :--- | :--- | :---
Регистрация | 'POST' | body: email, password, username, first_name, last_name| api/v1/signup/
Авторизация (получение токена) | 'POST' | body: username, password | api/v1/signin/
Получение списка активных опросов | 'GET' | headers: Authorization (токен) | api/v1/surveys/
Прохождение опроса | 'GET' (список вопросов), 'POST' (передача ответа на один из вопросов) | headers: Authorization (токен) | api/v1/surveys/`survey_id`/
Получение отданных пользователем ответов | 'GET' | headers: Authorization (токен) | api/v1/answers/

> Токен необходимо отдавать в следующем формате
> Authorization: Token d31754b63d74f15b48aa91ac387f5115d0ba83d6
